<% if @event %>

    <div id="[<%= @event.midpoint.longtitude %>, <%= @event.midpoint.latitude %>]" class="event_detail_page m-1 mb-3 p-3 border-primary border rounded bg-dark">
        Project Description:
        <br><%= @event.remark %>
        <br>
        <br> Existing Collaborators: <%= @event.invites.count %>
        <br> Meeting Location: 
            <% if @event.midpoint_id != 1 %>
                <%= @event.midpoint.name %>
            <% else %>
                <span class="text-danger"> TBC </span>
            <% end %>
        <br> Meeting Time: <%= @event.event_date.strftime("%d %b %Y, %A") %> <%= @event.event_time.strftime("%H:%M %p") %>
    </div>
    <div id="shortlist" class="ml-2">
        <h4> Collaborators </h4>
        <% if @event.invites.count != 0 %>
            <% @event.invites.each do |i| %>
                
                <div>
                    <span class="user_id"><%= i.user.id %></span>
                    <span class="user_lang"><%= i.user.lang %></span>
                </div>
            <% end %>
        <% end %>
    </div>


<button type="button" class="back_btn btn btn-danger mr-2">Back</button>

<script>
    
    var coordinates = [<%= @event.midpoint.longtitude.to_f %>, <%= @event.midpoint.latitude.to_f %>];


    map.addSource('meetpoint', {
        type: 'geojson',
        data: {
            "type": "FeatureCollection", "features": [{
                "type": "Feature",
                "revelance": 1,
                "properties": {
                    "description": "test",
                    "landmark": true,
                    "category": "building",
                },
                "center": coordinates,
                "geometry":{
                    "coordinates": coordinates,
                    "type": "Point"
                }
            }]
        }
    });

    map.addLayer({
        'id': 'meetpoint',
        'type': 'circle',
        'source': 'meetpoint',
        'layout': {
            'visibility': 'visible'
        },
        'paint': {
            'circle-radius': 30,
            'circle-color': 'rgba(255,100,100,1)'
        }
    })
/* 
    map.getSource('meetpoint')._data.features.forEach(function(marker) {
            //create a DOM element for the marker
            var el = document.createElement('div');
            el.className = 'marker';
            // el.style.backgroundImage = 'url(https://next-academy-group-1-coder-bot.herokuapp.com/assets/hotel_icon-fa5aa9fe3ae2a15f6465af79aa852e5db02d6aed3a2cbdc46bfeaee4dcf775a4.gif)';
            el.style.backgroundColor = "black";
            el.style.height = "50px";
            el.style.width = "50px";

            //add marker to map
            // coordinates = [hotel.latitude, hotel.longtitude]
            new mapboxgl.Marker(el).setLngLat(coordinates).addTo(map);
        });
 */


</script>

<% end %>