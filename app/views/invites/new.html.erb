<style>
    body {
    margin: 0;
    padding: 0;
    }

    #map {
    position: absolute;
    top: 0;
    bottom: 0;
    width: 100%;
    }
</style>

<div id='map'></div>

<script>
mapboxgl.accessToken = 'pk.eyJ1IjoibGltankwMTE0IiwiYSI6ImNqcmZyeGVveTFmenM0OWxwb2pheGZ3MW8ifQ.ka2dxppOoMDqiLiqzhh96Q';
var map = new mapboxgl.Map({
    container: 'map',
    style: 'mapbox://styles/mapbox/streets-v10', 
    center: [101.6958, 3.1466],
    zoom:12
});
map.on("load", () => {
    $.ajax({
        url: "/meeting_map",
        method: "POST",
        dataType: "JSON",
        success: function(response){
                console.log(response[0])
            map.addSource('Hotel', {
                type: 'geojson',
                data: response[0]
            });

        map.addLayer({
            'id': 'Hotel',
            'type': 'circle',
            'source': 'Hotel',
            'layout': {
                'visibility': 'visible'
            },
            'paint': {
                'circle-radius': 10,
                'circle-color': 'rgba(255,0,0,1)'
            }
        })

    map.getSource('Hotel')._data.features.forEach(function(marker){

        //create a DOM element for the marker
        var el = document.createElement('div');
        el.className = 'marker';
        el.style.backgroundImage = 'url(https://next-academy-group-1-coder-bot.herokuapp.com/assets/hotel_icon-fa5aa9fe3ae2a15f6465af79aa852e5db02d6aed3a2cbdc46bfeaee4dcf775a4.gif)';
        el.style.height = "50px";
        el.style.width = "50px";

        //add marker to map
        // coordinates = [hotel.latitude, hotel.longtitude]
        new mapboxgl.Marker(el).setLngLat(marker.center).addTo(map);
    });

        }
    })
})


</script>
